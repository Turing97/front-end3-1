<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>hello world!!</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <style>
            /* 选项卡 */
            #tab{
                width: 600px;
                margin: 0 auto;
            }
            .tab-tit{
                font-size: 0;
                width: 600px;
            }
            .tab-tit a{
                display: inline-block;
                height: 40px;
                line-height: 40px;
                font-size: 16px;
                width: 25%;
                text-align: center;
                background: #ccc;
                color: #333;
                text-decoration: none;
            }
            .tab-tit .cur{
                background: #09f;
                color: #fff;
            }
            .tab-con div{
                border: 1px solid #ccc;
                height: 400px;
                padding-top: 20px;
            }


            /* 统计总价 */
            .fl {
                float: left;
            }
            .fr {
                float: right;
            }
            blockquote, body, dd, div, dl, dt, fieldset, form, h1, h2, h3, h4, h5, h6, img, input, li, ol, p, table, td, textarea, th, ul {
                margin: 0;
                padding: 0;
            }
            .clearfix {
                zoom: 1;
            }
            .clearfix::after {
                clear: both;
            }
            .clearfix::after {
                content: '.';
                display: block;
                overflow: hidden;
                visibility: hidden;
                font-size: 0;
                line-height: 0;
                width: 0;
                height: 0;
            }
            a {
                text-decoration: none;
                color: #333;
            }
            img {
                vertical-align: middle;
            }
            .page-shopping-cart {
                width: 1200px;
                margin: 50px auto;
                font-size: 14px;
                border: 1px solid #e3e3e3;
                border-top: 2px solid #317ee7;
            }
            .page-shopping-cart .red-text {
                color: #e94826;
            }
            .page-shopping-cart .check-span {
                display: block;
                width: 24px;
                height: 20px;
                background: url('shopping_cart.png') no-repeat 0 0;
            }
            .page-shopping-cart .check-span.check-true {
                background: url("shopping_cart.png") no-repeat 0 -22px; }
            .page-shopping-cart .td-check {
                width: 70px; }
            .page-shopping-cart .td-product {
                width: 460px; }
            .page-shopping-cart .td-num, .page-shopping-cart .td-price, .page-shopping-cart .td-total {
                width: 160px; }
            .page-shopping-cart .td-do {
                width: 150px; }
            .page-shopping-cart .cart-product-title {
                text-align: center;
                height: 38px;
                line-height: 38px;
                padding: 0 20px;
                background: #f7f7f7;
                border-top: 1px solid #e3e3e3;
                border-bottom: 1px solid #e3e3e3; 
            }
            .page-shopping-cart .cart-product-title .td-product {
                text-align: center;
                font-size: 14px;
            }
            .page-shopping-cart .cart-product-title .td-check {
                text-align: left; 
            }
            .page-shopping-cart .cart-product-title .td-check .check-span {
                margin: 9px 6px 0 0; 
            }
            .page-shopping-cart .cart-product {
                padding: 0 20px;
                text-align: center; 
            }
            .page-shopping-cart .cart-product table {
                width: 100%;
                text-align: center;
                font-size: 14px; 
            }
            .page-shopping-cart .cart-product table td {
                padding: 20px 0; 
            }
            .page-shopping-cart .cart-product table tr {
                border-bottom: 1px dashed #e3e3e3; }
            .page-shopping-cart .cart-product table tr:last-child {
                border-bottom: none; 
            }
            .page-shopping-cart .cart-product table .product-num {
                border: 1px solid #e3e3e3;
                display: inline-block;
                text-align: center; 
            }
            .page-shopping-cart .cart-product table .product-num .num-do {
                width: 24px;
                height: 28px;
                display: block;
                background: #f7f7f7; 
            }
            .page-shopping-cart .cart-product table .product-num .num-reduce span {
                background: url("shopping_cart.png") no-repeat -40px -22px;
                display: block;
                width: 6px;
                height: 2px;
                margin: 13px auto 0 auto; 
            }
            .page-shopping-cart .cart-product table .product-num .num-add span {
                background: url("shopping_cart.png") no-repeat -60px -22px;
                display: block;
                width: 8px;
                height: 8px;
                margin: 10px auto 0 auto; 
            }
            .page-shopping-cart .cart-product table .product-num .num-input {
                width: 42px;
                height: 28px;
                line-height: 28px;
                border: none;
                text-align: center; 
            }
            .page-shopping-cart .cart-product table .td-product {
                text-align: left;
                font-size: 12px;
                line-height: 20px; 
            }
            .page-shopping-cart .cart-product table .td-product img {
                border: 1px solid #e3e3e3;
                margin-right: 10px; 
            }
            .page-shopping-cart .cart-product table .td-product .product-info {
                display: inline-block;
                vertical-align: middle; 
            }
            .page-shopping-cart .cart-product table .td-do {
                font-size: 12px; 
            }
            .page-shopping-cart .cart-product-info {
                height: 50px;
                line-height: 50px;
                background: #f7f7f7;
                padding-left: 20px; 
            }
            .page-shopping-cart .cart-product-info .delect-product {
                color: #666; 
            }
            .page-shopping-cart .cart-product-info .delect-product span {
                display: inline-block;
                vertical-align: top;
                margin: 18px 8px 0 0;
                width: 13px;
                height: 15px;
                background: url("shopping_cart.png") no-repeat -60px 0; }
            .page-shopping-cart .cart-product-info .product-total {
                font-size: 14px;
                color: #e94826; 
            }
            .page-shopping-cart .cart-product-info .product-total span {
                font-size: 20px; 
            }
            .page-shopping-cart .cart-product-info .check-num {
                color: #333; 
            }
            .page-shopping-cart .cart-product-info .check-num span {
                color: #e94826; 
            }
            .page-shopping-cart .cart-product-info .keep-shopping {
                color: #666;
                margin-left: 40px; 
            }
            .page-shopping-cart .cart-product-info .keep-shopping span {
                display: inline-block;
                vertical-align: top;
                margin: 18px 8px 0 0;
                width: 15px;
                height: 15px;
                background: url("shopping_cart.png") no-repeat -40px 0; }
            .page-shopping-cart .cart-product-info .btn-buy {
                height: 50px;
                color: #fff;
                font-size: 20px;
                display: block;
                width: 110px;
                background: #ff7700;
                text-align: center;
                margin-left: 30px;
            }
            .page-shopping-cart .cart-worder {
                padding: 20px; 
            }
            .page-shopping-cart .cart-worder .choose-worder {
                color: #fff;
                display: block;
                background: #39e;
                width: 140px;
                height: 40px;
                line-height: 40px;
                border-radius: 4px;
                text-align: center;
                margin-right: 20px; 
            }
            .page-shopping-cart .cart-worder .choose-worder span {
                display: inline-block;
                vertical-align: top;
                margin: 9px 10px 0 0;
                width: 22px;
                height: 22px;
                background: url("shopping_cart.png") no-repeat -92px 0; }
            .page-shopping-cart .cart-worder .worker-info {
                color: #666; 
            }
            .page-shopping-cart .cart-worder .worker-info img {
                border-radius: 100%;
                margin-right: 10px; 
            }
            .page-shopping-cart .cart-worder .worker-info span {
                color: #000; 
            }

            .choose-worker-box {
                width: 620px;
                background: #fff; 
            }
            .choose-worker-box .box-title {
                height: 40px;
                line-height: 40px;
                background: #F7F7F7;
                text-align: center;
                position: relative;
                font-size: 14px; 
            }
            .choose-worker-box .box-title a {
                display: block;
                position: absolute;
                top: 15px;
                right: 16px;
                width: 10px;
                height: 10px;
                background: url("shopping_cart.png") no-repeat -80px 0; 
            }
            .choose-worker-box .box-title a:hover {
                background: url("shopping_cart.png") no-repeat -80px -22px; 
            }
            .choose-worker-box .worker-list {
                padding-top: 30px;
                height: 134px;
                overflow-y: auto; 
            }
            .choose-worker-box .worker-list li {
                float: left;
                width: 25%;
                text-align: center;
                margin-bottom: 30px; 
            }
            .choose-worker-box .worker-list li p {
                margin-top: 8px; 
            }
            .choose-worker-box .worker-list li.cur a {
                color: #f70; 
            }
            .choose-worker-box .worker-list li.cur a img {
                border: 1px solid #f70; 
            }
            .choose-worker-box .worker-list li a:hover {
                color: #f70; 
            }
            .choose-worker-box .worker-list li a:hover img {
                border: 1px solid #f70; 
            }
            .choose-worker-box .worker-list li img {
                border: 1px solid #fff;
                border-radius: 100%; 
            }

        </style>
        
    </head>
    <body>
        <div id="app">{{ msg }}</div>

        <!-- vue创建文本框实例 -->

        <!-- v-cloak 隐藏未编译的变量，直到vue实例准备就绪
        元素被点击后 hideToolTp（）方法被调用 -->
        <div id="main" v-cloak v-on:click = "hideToolTp">
            <!--这是一个提示框
                v-on:click.stop是一个点击事件处理器，stop修饰符用于阻止事件传递
                v-if用来判断show——tooltip为true时显示-->
            <div class="tooltip" v-on:click.stop v-if='show_tooltip'>
                <!--v-model 绑定了文本域的内容 在文本域内容改变时，对应的变量也会实时改变-->
                <input type="text" v-model='text_content'/>
            </div>
            <!--点击后调用toggleTooltip方法并阻止事件传递-->
            <!-- "text_content" 变量根据文本区域内容的变化而变化-->
            <p v-on:click.stop = "toggleTooltip">{{text_content}} </p>
        </div>


        <!--选项卡功能-->

        <div id="tab">
            <div class="tab-tit">
                <!--点击设置curId的值，如果curId等于0，
                    第一个a添加cur类名，如果curId等于1，
                    第二个a添加cur类名，依此类推。添加了cur类名，
                    a就会改变样式@click，class，v-show
                    这三个是vue常用的指令或添加事件的方式-->
                <a href="javascript:;" @click ="curId = 0" :class = "{'cur':curId === 0}">html</a>
                <a href="javascript:;" @click ="curId = 1" :class = "{'cur':curId === 1}">css</a>
                <a href="javascript:;" @click ="curId = 2" :class = "{'cur':curId === 2}">javascript</a>
                <a href="javascript:;" @click ="curId = 3" :class = "{'cur':curId === 3}">vue</a>
               
            </div>
            <div class = "tab-con">
                <!--根据curId的值显示div，如果curId等于0，第一个div显示，其他三个div不显示。-->
                <div v-show = "curId ===0">
                    html
                </div>
                <div v-show = "curId === 1">
                    css
                </div>
                <div v-show = "curId === 2">
                    JavaScript
                </div>
                <div v-show = "curId === 3">
                    vue                    
                </div>
            </div>
        </div>
        

        <!--统计总价-->
        <div class="page-shopping-cart" id="shopping-cart">
            <h4 class="cart-title">购物清单</h4>
            <div class="cart-product-title clearfix">
                <div class="td-check fl"><span class="check-span fl check-all" :class="{'check-true':isSelectAll}" @click="selectProduct(isSelectAll)"></span>全选</div>
                <div class="td-product fl">商品</div>
                <div class="td-num fl">数量</div>
                <div class="td-price fl">单价（元）</div>
                <div class="td-total fl">金额（元）</div>
                <div class="td-do fl">操作</div>
            </div>
            <div class="cart-product clearfix">
                <table>
                    <tbody>
                        <tr v-for = 'item in productList'>
                            <td class="td-check"><span class="check-span" @click="item.select=!item.select" :class="{'check-true':item.select}"></span></td>
                            <td class="td-product"><img src="testimg.jpg" width="98" height="98">
                                <div class="product-info">
                                    <h6>{{item.pro_name}}</h6>
                                    <p>品牌；{{item.pro_brand}} 产地：{{item.pro_place}} </p>
                                    <p>规格/纯度:{{item.pro_purity}}&nbsp;&nbsp;起定量：{{item.pro_min}}</p>
                                    <p>配送仓储：{{item.pro_depot}}</p>
                                </div>
                                <div class="clearfix"></div>
                            </td>
                            <td class="td-num">
                                <div class="product-num">
                                    <a href="javascript:;" class="num-reduce num-do fl" @click = "item.pro_num--"><span></span></a>
                                    <input type="text" class="num-input" v-model = "item.pro_num">
                                    <a href="javascript:;" class="num-add num-do fr" @click = "item.pro_num++"><span></span></a>
                                </div>
                            </td>
                            <td class="td-price">
                                <p class="red-text">￥<span class="price-text">{{item.pro_price.toFixed(2)}}</span></p>
                            </td>
                            <td class="td-total">
                                <p class="red-text">￥<span class="total-text">{{item.pro_price*item.pro_num}}</span>.00</p>
                            </td>
                            <td class="td-do"><a href="javascript:;" class="product-delect">删除</a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="cart-product-info">
                <a class="delect-product" href="javascript:;"><span></span>删除所选商品</a>
                <a class="keep-shopping" href="#"><span></span>继续购物</a>
                <a class="btn-buy fr" href="javascript:;">去结算</a>
                <p class="fr product-total">￥<span>{{getTotal.totalPrice}}</span></p>
                <p class="fr check-num"><span>{{getTotal.totalNum}}</span>件商品总计（不含运费）：</p>
            </div>
            <div class="cart-worder clearfix">
                <a href="javascript:;" class="choose-worder f1"><span></span>绑定跟单员</a>
                <div class="worker-info fl">

                </div>
            </div>
        </div>


        <!-- 引入vue -->
        <script src="node_modules/vue/dist/vue.js"></script>
        <!-- 使用vue -->
        <script>
            var vm = new Vue({
                //el； 提供一个在页面上已存在的DOM元素作为vue实例的挂载目标
                el: "#app",
                //Vue 实例的数据对象，用于给view提供数据
                data () {
                    return {
                        msg: "hello Vue"
                    }
                }
            })
            //先在data中声明数据，再使用数据
            //可以通过vm.$data 访问到data中的所有属性，或者vm.msg
            //vm.$data.msg === vm.msg >>> true

            //数据绑定
                // 最常用的方式：Mustache(插值语法)， 也就是{{}}语法
                // 解释：{{}} 从数据对象data中获取数据
                // 说明：数据对象的属性值发生了改变，插值处的内容都会更新
                // 说明：{{}}中只能出现JavaScript表达式，而不能解析js语句
                // 注意：Mustache 语法不能作用在html 元素上
            
                

            //vue创建文本框实例
                var demo = new Vue({
                    el:"#main",
                    data: {
                        show_tooltip:false,
                        text_content:'点击以编辑'
                    },
                    methods: {
                        hideToolTp: function() {
                            //在模型改变时，视图也会自动更新
                            this.show_tooltip = false;
                        },
                        toggleTooltip: function() {
                            this.show_tooltip = !this.show_tooltip;
                        }
                    }
                })
            

            //选项卡功能
            new Vue( {
                el:'#tab',
                data: {
                    curId: 0
                }
                
                
            })



            //统计总价
            productList: [
                {
                    'pro_name': '斯文 甘油 丙三醇',
                    'pro_brand': 'skc',
                    'pro_place': '韩国',
                    'pro_purity': '99.7%',
                    'pro_min': '215千克',
                    'pro_depot': '上海仓海仓储',
                    'pro_num': 3,
                    'pro_img': '../../img/testimg.png',
                    'pro_price': 800
                }
            ]
            new Vue({
                el:'#shopping-cart',
                data: {                    
                    productList: [
                        {
                            'pro_name': '斯文 甘油 丙三醇',
                            'pro_brand': 'skc',
                            'pro_place': '韩国',
                            'pro_purity': '99.7%',
                            'pro_min': '215千克',
                            'pro_depot': '上海仓海仓储',
                            'pro_num': 3,
                            'pro_img': '../../img/testimg.png',
                            'pro_price': 800
                        },
                        {
                            'pro_name': '斯文 甘油 丙三醇',
                            'pro_brand': 'skc',
                            'pro_place': '韩国',
                            'pro_purity': '99.7%',
                            'pro_min': '215千克',
                            'pro_depot': '上海仓海仓储',
                            'pro_num': 3,
                            'pro_img': '../../img/testimg.png',
                            'pro_price': 800
                        },
                        {
                            'pro_name': '斯文 甘油 丙三醇',
                            'pro_brand': 'skc',
                            'pro_place': '韩国',
                            'pro_purity': '99.7%',
                            'pro_min': '215千克',
                            'pro_depot': '上海仓海仓储',
                            'pro_num': 3,
                            'pro_img': '../../img/testimg.png',
                            'pro_price': 800
                        }
                    ]
                },
                computed: {
                    isSelectAll:function() {
                        //如果productList中每一条数据的select都为true，返回true，否者返回false；
                        return this.productList.every(function (val) {
                            return val.select
                        });
                    },
                    getTotal:function() {
                        //获取productList中select为true的数据
                        var _proList = this.productList.filter(function (val) {
                            return val.select
                        }),
                        totalPrice = 0;
                        for(var i = 0, len = _proList.length; i < len; i++) {
                            //总价累加
                            totalPrice += _proList[i].pro_num * _proList[i].pro_price;
                        }
                        //选择产品的件数就是_proList.length,总价就是totalPrice
                        return {totalNum:_proList.length, totalPrice:totalPrice
                        }
                    }
                },
                methods: {
                    //全选和取消全选
                    selectProduct: function(_isSelect) {
                        //遍历productList，全部取反
                        for (var i = 0, len = this.productList.length; i < len; i++) {
                            this.productList[i].select = !_isSelect;
                        }
                    }

                },
                mounted: function () {
                    //为productList添加select（是否选中）字段，初始值为true
                    var _this = this
                    //为productlist添加select（是否选中）字段，初始值为true
                    this.productList.map(function (item) {
                        _this.$set(item, 'select',true);
                    })
                    //要像上面这样写 双向绑定才能生效，下面的写法是有问题的，双向绑定不起作用
                    //this.productList.map(function (item) {
                    //    item.select = true
                    //})
                }
            })

        </script>
        
    </body>
</html>